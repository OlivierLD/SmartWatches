<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<meta name="description" content="NMEA Client, for a REST Nav Server"/>

	<title>NMEA Client</title>

	<link rel="stylesheet" type="text/css" href="css/style.css"/>
	<script src="js/main.js"></script>
	<script src="js/ajax.manager.js"></script>
	<script src="js/pub.sub.js"></script>

	<script type="text/javascript">
		/**
		 *  SUBSCRIBERS HERE.
		 *
		 * Note: Event's definition (topic's name) is in ajax.manager.js, method onMessage
		 */
		events.subscribe('sog', function (val) {
			document.getElementById('sog').innerText = val.toFixed(2);
		});
		events.subscribe('cog', function (val) {
			document.getElementById('cog').innerText = val.toFixed(0);
		});
		events.subscribe('bsp', function (val) {
			document.getElementById('bsp').innerText = val.toFixed(2);
		});
		events.subscribe('awa', function (val) {
			document.getElementById('awa').innerText = val.toFixed(0);
		});
		events.subscribe('aws', function (val) {
			document.getElementById('aws').innerText = val.toFixed(2);
		});
		events.subscribe('twa', function (val) {
			document.getElementById('twa').innerText = val.toFixed(0);
		});
		events.subscribe('tws', function (val) {
			document.getElementById('tws').innerText = val.toFixed(2);
		});
		events.subscribe('twd', function (val) {
			document.getElementById('twd').innerText = val.toFixed(0);
		});
		events.subscribe('hdg', function (val) {
			document.getElementById('hdg').innerText = val.toFixed(0);
		});

	</script>
</head>

<body>
<div class=contents>
	<div style='margin:auto;'>
		<table border="0" style="margin: auto;">
		<tr>
		<td colspan="3" style="min-height: 10px;">&nbsp;<br/>NMEA</td>
		</tr>
			<tr>
				<td>
					<div class="prev" onclick="plusSlides(-1);">&#10094;</div>
				</td>
				<td>
					<div class="slideshow-container">
						<div class="the-slides fade">
							<div class="number-text">1 / 9</div>
							<div class="display">
								<div class="display-title">Boat Speed</div>
								<div class="display-data" id="bsp">00.00</div>
								<div class="display-unit">knots</div>
							</div>
							<div class="text">BSP</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">2 / 9</div>
							<div class="display">
								<div class="display-title">Apparent Wind Speed</div>
								<div class="display-data" id="aws">00.00</div>
								<div class="display-unit">knots</div>
							</div>
							<div class="text">AWS</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">3 / 9</div>
							<div class="display">
								<div class="display-title">Apparent Wind Angle</div>
								<div class="display-data" id="awa">000</div>
								<div class="display-unit">degrees</div>
							</div>
							<div class="text">AWA</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">4 / 9</div>
							<div class="display">
								<div class="display-title">True Wind Speed</div>
								<div class="display-data" id="tws">00.00</div>
								<div class="display-unit">knots</div>
							</div>
							<div class="text">TWS</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">5 / 9</div>
							<div class="display">
								<div class="display-title">True Wind Dir</div>
								<div class="display-data" id="twd">000</div>
								<div class="display-unit">degrees</div>
							</div>
							<div class="text">TWD</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">6 / 9</div>
							<div class="display">
								<div class="display-title">True Wind Angle</div>
								<div class="display-data" id="twa">000</div>
								<div class="display-unit">degrees</div>
							</div>
							<div class="text">TWA</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">7 / 9</div>
							<div class="display">
								<div class="display-title">True Heading</div>
								<div class="display-data" id="hdg">000</div>
								<div class="display-unit">degrees</div>
							</div>
							<div class="text">HDG</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">8 / 9</div>
							<div class="display">
								<div class="display-title">Course Over Ground</div>
								<div class="display-data" id="cog">000</div>
								<div class="display-unit">degrees</div>
							</div>
							<div class="text">COG</div>
						</div>

						<div class="the-slides fade">
							<div class="number-text">9 / 9</div>
							<div class="display">
								<div class="display-title">Speed Over Ground</div>
								<div class="display-data" id="sog">00.00</div>
								<div class="display-unit">knots</div>
							</div>
							<div class="text">SOG</div>
						</div>
					</div>
				</td>
				<td>
					<div class="next" onclick="plusSlides(1);">&#10095;</div>
				</td>
			</tr>
			<tr>
				<td colspan="3">
					<div class="dots">
						<span class="dot" onclick="currentSlide(1);" title="BSP"></span>
						<span class="dot" onclick="currentSlide(2);" title="AWS"></span>
						<span class="dot" onclick="currentSlide(3);" title="AWA"></span>
						<span class="dot" onclick="currentSlide(4);" title="TWS"></span>
						<span class="dot" onclick="currentSlide(5);" title="TWD"></span>
						<span class="dot" onclick="currentSlide(6);" title="TWA"></span>
						<span class="dot" onclick="currentSlide(7);" title="HDG"></span>
						<span class="dot" onclick="currentSlide(8);" title="COG"></span>
						<span class="dot" onclick="currentSlide(9);" title="SOG"></span>
					</div>
				</td>
			</tr>
			<tr>
				<td colspan="3">
					<div class="scroll">
						Auto-scroll <input type="checkbox" onchange="manageClick(this);" />
					</div>
				</td>
			</tr>
		</table>
	</div>
</div>

<script type="text/javascript">
	"use strict";

	let auto = false;

	function manageClick(cb) {
		auto = cb.checked;
		if (auto) {
			showSlides(slideIndex);
		}
	}

	let slideIndex = 1;
	showSlides(slideIndex);

	function plusSlides(n) {
		showSlides(slideIndex += n);
	}

	function currentSlide(n) {
		showSlides(slideIndex = n);
	}

	function showSlides(n) {
		let slides = document.getElementsByClassName("the-slides");
		let dots = document.getElementsByClassName("dot");
		if (n > slides.length) {
			slideIndex = 1;
		}
		if (n < 1) {
			slideIndex = slides.length;
		}
		for (let i = 0; i < slides.length; i++) {
			//		slides[i].style.display = "none";
			slides[i].classList.remove("visible-slide");
		}
		if (!auto) {
			for (let i = 0; i < dots.length; i++) {
				dots[i].className = dots[i].className.replace(" active", "");
			}
			//				slides[slideIndex - 1].style.display = "block";
			slides[slideIndex - 1].classList.add("visible-slide"); // Show active one
			dots[slideIndex - 1].className += " active";
		} else { // Auto
			slideIndex++;
			if (slideIndex > slides.length) {
				slideIndex = 1
			}
			for (let i = 0; i < dots.length; i++) {
				dots[i].className = dots[i].className.replace(" active", "");
			}
			//				slides[slideIndex - 1].style.display = "block";
			slides[slideIndex - 1].classList.add("visible-slide"); // Show active one
			dots[slideIndex - 1].className += " active";
			setTimeout(showSlides, 5000); // Change screen every 5 seconds
		}
	}
</script>

</body>

</html>
